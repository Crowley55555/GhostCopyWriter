# üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Ghostwriter –ø—Ä–æ–µ–∫—Ç–∞

–ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –¥–≤—É—Ö–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã: Django + Flask

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

### –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
- **`test_django_models.py`** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Django –º–æ–¥–µ–ª–µ–π
- **`test_django_views.py`** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Django views –∏ API
- **`test_flask_app.py`** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- **`test_integration.py`** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è Django-Flask
- **`test_performance.py`** - –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç—ã

### –ù–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã
- **`test_load.py`** - –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å Locust

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –¢–µ—Å—Ç–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements-test.txt
```

### 2. –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
```bash
# –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–±–µ–∑ –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤)
python run_tests.py

# –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã–º–∏ —Ç–µ—Å—Ç–∞–º–∏
python run_tests.py --load
```

### 3. –ó–∞–ø—É—Å–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π

#### Django —Ç–µ—Å—Ç—ã
```bash
# –í—Å–µ Django —Ç–µ—Å—Ç—ã
python manage.py test

# –¢–æ–ª—å–∫–æ –º–æ–¥–µ–ª–∏
python manage.py test tests.test_django_models

# –¢–æ–ª—å–∫–æ views
python manage.py test tests.test_django_views
```

#### Flask —Ç–µ—Å—Ç—ã
```bash
# –í—Å–µ Flask —Ç–µ—Å—Ç—ã
python -m pytest tests/test_flask_app.py -v

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
python -m pytest tests/test_flask_app.py --cov=flask_generator
```

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
```bash
# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
python -m pytest tests/test_integration.py -v

# –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
python -m pytest tests/test_performance.py -v -s
```

#### –ù–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã
```bash
# –ó–∞–ø—É—Å–∫ Django —Å–µ—Ä–≤–µ—Ä–∞ (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
python manage.py runserver

# –ó–∞–ø—É—Å–∫ –Ω–∞–≥—Ä—É–∑–æ—á–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
locust -f tests/test_load.py --host=http://localhost:8000

# –ò–ª–∏ headless —Ä–µ–∂–∏–º
locust -f tests/test_load.py --headless -u 10 -r 2 -t 60s --host http://localhost:8000
```

## üìä –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç—á–µ—Ç
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ `python run_tests.py` —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ñ–∞–π–ª **`test_results.txt`** —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ—Ç—á–µ—Ç–æ–º:
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
- –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–æ–∫
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é
- –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞
```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –ø–æ–∫—Ä—ã—Ç–∏—è
python -m pytest --cov=generator --cov=flask_generator --cov-report=html

# –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á–µ—Ç–∞
open htmlcov/index.html  # Linux/Mac
start htmlcov/index.html  # Windows
```

### –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```bash
# –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
python -m memory_profiler tests/test_performance.py

# –ë–µ–Ω—á–º–∞—Ä–∫–∏
python -m pytest tests/test_performance.py --benchmark-only
```

## üéØ –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è

### Django –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- ‚úÖ **–ú–æ–¥–µ–ª–∏**: –°–æ–∑–¥–∞–Ω–∏–µ, –≤–∞–ª–∏–¥–∞—Ü–∏—è, —Å–≤—è–∑–∏, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- ‚úÖ **Views**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, AJAX
- ‚úÖ **–§–æ—Ä–º—ã**: –í–∞–ª–∏–¥–∞—Ü–∏—è, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–®–∞–±–ª–æ–Ω—ã**: –†–µ–Ω–¥–µ—Ä–∏–Ω–≥, –∫–æ–Ω—Ç–µ–∫—Å—Ç
- ‚úÖ **–°–µ—Å—Å–∏–∏**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–π
- ‚úÖ **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –ë—ã—Å—Ç—Ä—ã–π –≤—Ö–æ–¥, –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- ‚úÖ **API endpoints**: Health check, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ**: Encrypt/decrypt –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **OpenAI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: GPT, DALL-E, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ **Mock —Ä–µ–∂–∏–º**: –†–∞–±–æ—Ç–∞ –±–µ–∑ API –∫–ª—é—á–µ–π
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –¢–∞–π–º–∞—É—Ç—ã, —Å–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ **Django-Flask —Å–≤—è–∑—å**: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- ‚úÖ **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ**: –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏
- ‚úÖ **–°–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
- ‚úÖ **Fallback —Å—Ü–µ–Ω–∞—Ä–∏–∏**: –î–µ–≥—Ä–∞–¥–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ **–í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞**: API endpoints, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- ‚úÖ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏**: –£—Ç–µ—á–∫–∏, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- ‚úÖ **–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ **–°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ `.env.test` —Ñ–∞–π–ª:
```env
# –¢–µ—Å—Ç–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
DJANGO_SETTINGS_MODULE=ghostwriter.settings
GENERATOR_ENCRYPTION_KEY=test_key_32_bytes_long_for_fernet!=

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö API —Ç–µ—Å—Ç–æ–≤
OPENAI_API_KEY=your_test_api_key
GIGACHAT_CLIENT_ID=your_test_client_id
GIGACHAT_CLIENT_SECRET=your_test_client_secret
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
–¢–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤—Ä–µ–º–µ–Ω–Ω—É—é SQLite –±–∞–∑—É –≤ –ø–∞–º—è—Ç–∏, –Ω–µ –≤–ª–∏—è—è –Ω–∞ –æ—Å–Ω–æ–≤–Ω—É—é –ë–î.

## üêõ –û—Ç–ª–∞–¥–∫–∞ —Ç–µ—Å—Ç–æ–≤

### –ó–∞–ø—É—Å–∫ —Å –æ—Ç–ª–∞–¥–∫–æ–π
```bash
# –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
python -m pytest tests/ -v -s

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ
python -m pytest tests/ -x

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
python -m pytest tests/test_django_models.py::UserProfileModelTest::test_create_user_profile -v
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –í–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏ Django
python -m pytest tests/ --log-cli-level=DEBUG

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª
python -m pytest tests/ --log-file=test_debug.log
```

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

### –¶–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
- **–ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞**: >80%
- **–í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞**: <2—Å–µ–∫ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- **–£—Å–ø–µ—à–Ω–æ—Å—Ç—å**: >95% –∑–∞–ø—Ä–æ—Å–æ–≤
- **–ü–∞–º—è—Ç—å**: <100MB –ø—Ä–∏—Ä–æ—Å—Ç –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- –ß–∞—Å—Ç–æ—Ç–∞ –æ—à–∏–±–æ–∫
- –î–µ–≥—Ä–∞–¥–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üîÑ CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–±–∞–≤—å—Ç–µ –≤ CI pipeline:
```yaml
# –ü—Ä–∏–º–µ—Ä –¥–ª—è GitHub Actions
- name: Run tests
  run: |
    pip install -r requirements.txt
    pip install -r requirements-test.txt
    python run_tests.py
    
- name: Upload test results
  uses: actions/upload-artifact@v3
  with:
    name: test-results
    path: test_results.txt
```
