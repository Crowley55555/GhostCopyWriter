# üöÄ –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–µ–ø–ª–æ—é Ghostwriter –≤ Production

**–í–µ—Ä—Å–∏—è:** 2.2 (—Å –∑–∞—â–∏—Ç–æ–π –æ—Ç –º—É–ª—å—Ç–∏–∞–∫–∫–∞—É–Ω—Ç–æ–≤)  
**–î–∞—Ç–∞:** 25 —è–Ω–≤–∞—Ä—è 2026 –≥.  
**–°—Ç–∞—Ç—É—Å:** Production Ready

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å–∏—Å—Ç–µ–º—ã)
2. [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è-–∫-—Å–µ—Ä–≤–µ—Ä—É)
3. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –¥–µ–ø–ª–æ—é](#–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-–∫-–¥–µ–ø–ª–æ—é)
4. [–î–µ–ø–ª–æ–π Django –Ω–∞ —Ä–æ—Å—Å–∏–π—Å–∫–æ–º —Å–µ—Ä–≤–µ—Ä–µ](#–¥–µ–ø–ª–æ–π-django-–Ω–∞-—Ä–æ—Å—Å–∏–π—Å–∫–æ–º-—Å–µ—Ä–≤–µ—Ä–µ)
5. [–î–µ–ø–ª–æ–π Flask –Ω–∞ –∑–∞—Ä—É–±–µ–∂–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ](#–¥–µ–ø–ª–æ–π-flask-–Ω–∞-–∑–∞—Ä—É–±–µ–∂–Ω–æ–º-—Å–µ—Ä–≤–µ—Ä–µ)
6. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞ –∏ SSL](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–¥–æ–º–µ–Ω–∞-–∏-ssl)
7. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
8. [–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π](#–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ-–º–∏–≥—Ä–∞—Ü–∏–π)
9. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–ø–ª–∞—Ç–µ–∂–Ω—ã—Ö-—Å–∏—Å—Ç–µ–º)
10. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
11. [–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ä–µ–∑–µ—Ä–≤–Ω–æ–µ-–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ)
12. [Troubleshooting](#troubleshooting)
13. [Checklist –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º](#checklist-–ø–µ—Ä–µ–¥-–∑–∞–ø—É—Å–∫–æ–º)

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    –†–û–°–°–ò–ô–°–ö–ò–ô –°–ï–†–í–ï–†                            ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îÇ
‚îÇ  ‚îÇ  Nginx  ‚îÇ‚îÄ‚îÄ‚îÇ Django  ‚îÇ‚îÄ‚îÄ‚îÇ Postgres‚îÇ  ‚îÇ  Redis  ‚îÇ           ‚îÇ
‚îÇ  ‚îÇ  :80    ‚îÇ  ‚îÇ  :8000  ‚îÇ  ‚îÇ  :5432  ‚îÇ  ‚îÇ  :6379  ‚îÇ           ‚îÇ
‚îÇ  ‚îÇ  :443   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ                                           ‚îÇ
‚îÇ                    ‚îÇ       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                         ‚îÇ
‚îÇ                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   Bot   ‚îÇ                         ‚îÇ
‚îÇ                            ‚îÇ Telegram‚îÇ                         ‚îÇ
‚îÇ                            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚îÇ
                              ‚îÇ HTTPS API (—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ)
                              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   –ó–ê–†–£–ë–ï–ñ–ù–´–ô –°–ï–†–í–ï–†                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                      ‚îÇ
‚îÇ  ‚îÇ  Nginx  ‚îÇ‚îÄ‚îÄ‚îÇ  Flask  ‚îÇ  OpenAI GPT + DALL-E                 ‚îÇ
‚îÇ  ‚îÇ  :443   ‚îÇ  ‚îÇ  :5000  ‚îÇ                                      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- **Django** - –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ GigaChat, —Ç–æ–∫–µ–Ω—ã, –ø–ª–∞—Ç–µ–∂–∏)
- **Telegram Bot** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤—ã–¥–∞—á–∞ —Ç–æ–∫–µ–Ω–æ–≤, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
- **PostgreSQL** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Redis** - –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ rate limiting
- **Nginx** - reverse proxy, SSL, —Å—Ç–∞—Ç–∏–∫–∞
- **Flask** (–æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä) - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ OpenAI

---

## üíª –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É

### –†–æ—Å—Å–∏–π—Å–∫–∏–π —Å–µ—Ä–≤–µ—Ä (Django + Bot)

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ:**
- OS: Ubuntu 20.04+ / Debian 11+ / CentOS 8+
- RAM: 2GB (4GB —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- CPU: 2 cores (4 cores —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- Disk: 20GB SSD
- Network: –ü—É–±–ª–∏—á–Ω—ã–π IP, –ø–æ—Ä—Ç—ã 80, 443 –æ—Ç–∫—Ä—ã—Ç—ã

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ:**
- RAM: 8GB
- CPU: 4 cores
- Disk: 50GB SSD
- Swap: 2GB

### –ó–∞—Ä—É–±–µ–∂–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (Flask)

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ:**
- OS: Ubuntu 20.04+ / Debian 11+
- RAM: 1GB (2GB —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- CPU: 1 core (2 cores —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- Disk: 10GB SSD
- Network: –ü—É–±–ª–∏—á–Ω—ã–π IP, –ø–æ—Ä—Ç 443 –æ—Ç–∫—Ä—ã—Ç

---

## üîß –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –¥–µ–ø–ª–æ—é

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker –∏ Docker Compose

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
curl -fsSL https://get.docker.com | sh
sudo usermod -aG docker $USER

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker Compose
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
docker --version
docker-compose --version

# –ü–µ—Ä–µ–ª–æ–≥–∏–Ω—å—Ç–µ—Å—å –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≥—Ä—É–ø–ø—ã docker
exit
# (–∑–∞—Ç–µ–º –≤–æ–π–¥–∏—Ç–µ —Å–Ω–æ–≤–∞)
```

### 2. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞
sudo mkdir -p /opt/ghostwriter
cd /opt/ghostwriter

# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
sudo git clone https://github.com/your-repo/ghostwriter.git .

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∞
sudo chown -R $USER:$USER /opt/ghostwriter
```

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∫–ª—é—á–µ–π –∏ —Ç–æ–∫–µ–Ω–æ–≤

#### 3.1. Django Secret Key

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Django Secret Key
python3 -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())'
```

**–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç** - –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è `DJANGO_SECRET_KEY` –≤ `.env`

#### 3.2. Fernet Key –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è Django-Flask

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Fernet Key
python3 -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
```

**–í–ê–ñ–ù–û:** –≠—Ç–æ—Ç –∫–ª—é—á –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **–æ–¥–∏–Ω–∞–∫–æ–≤—ã–º** –Ω–∞ Django –∏ Flask —Å–µ—Ä–≤–µ—Ä–∞—Ö!

**–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç** - –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è `GENERATOR_ENCRYPTION_KEY` –≤ `.env` –Ω–∞ –æ–±–æ–∏—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö

#### 3.3. Telegram Bot Token

1. –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
3. –í–≤–µ–¥–∏—Ç–µ –∏–º—è –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `GhostCopywriter`)
4. –í–≤–µ–¥–∏—Ç–µ username (–Ω–∞–ø—Ä–∏–º–µ—Ä: `ghostcopywriter_bot`)
5. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω** - –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è `TELEGRAM_BOT_TOKEN`

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ
/setdescription - –¥–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –±–æ—Ç–∞

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã
/setcommands - –¥–æ–±–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—ã:
start - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É
help - –°–ø—Ä–∞–≤–∫–∞
plans - –¢–∞—Ä–∏—Ñ—ã

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∞–≤–∞—Ç–∞—Ä (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
/setuserpic - –∑–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
```

#### 3.4. GigaChat Credentials

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [https://developers.sber.ru/](https://developers.sber.ru/)
2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –ø—Ä–æ–¥—É–∫—Ç "GigaChat API"
4. –ü–æ–ª—É—á–∏—Ç–µ **Authorization Key** –∏–∑ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞
5. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á** - –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è `GIGACHAT_CREDENTIALS`

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ** (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ OAuth2):
- `GIGACHAT_CLIENT_ID` - Client ID –∏–∑ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞
- `GIGACHAT_CLIENT_SECRET` - Client Secret –∏–∑ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞

#### 3.5. OpenAI API Key (–¥–ª—è Flask —Å–µ—Ä–≤–µ—Ä–∞)

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [https://platform.openai.com/](https://platform.openai.com/)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [API Keys](https://platform.openai.com/api-keys)
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π API –∫–ª—é—á
4. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á** - –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è `OPENAI_API_KEY` –Ω–∞ Flask —Å–µ—Ä–≤–µ—Ä–µ

#### 3.6. Webhook Secret –¥–ª—è Telegram

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Webhook Secret
openssl rand -hex 32
```

**–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç** - –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è `TELEGRAM_WEBHOOK_SECRET`

#### 3.7. –Æ–ö–∞—Å—Å–∞ (–¥–ª—è –ø—Ä–∏–µ–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π)

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [https://yookassa.ru/](https://yookassa.ru/)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç ‚Üí –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ‚Üí –ö–ª—é—á–∏ API
3. –ü–æ–ª—É—á–∏—Ç–µ:
   - `YOOKASSA_SHOP_ID` - ID –º–∞–≥–∞–∑–∏–Ω–∞
   - `YOOKASSA_SECRET_KEY` - –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á

**Webhook URL –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –Æ–ö–∞—Å—Å–∞:**
```
https://yourdomain.com/api/payments/yookassa/webhook/
```

---

## üá∑üá∫ –î–µ–ø–ª–æ–π Django –Ω–∞ —Ä–æ—Å—Å–∏–π—Å–∫–æ–º —Å–µ—Ä–≤–µ—Ä–µ

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env —Ñ–∞–π–ª–∞

```bash
cd /opt/ghostwriter

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp env.production.example .env

# –û—Ç–∫—Ä–æ–π—Ç–µ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
nano .env
```

**–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**

```env
# =============================================================================
# DJANGO CORE (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
# =============================================================================

# –í—Å—Ç–∞–≤—å—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Django Secret Key
DJANGO_SECRET_KEY=–≤–∞—à-—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-–∫–ª—é—á-50-—Å–∏–º–≤–æ–ª–æ–≤

# –í–∞—à–∏ –¥–æ–º–µ–Ω—ã (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é, –ë–ï–ó –ø—Ä–æ–±–µ–ª–æ–≤)
# –ü–æ–∫–∞ –¥–æ–º–µ–Ω–∞ –Ω–µ—Ç - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ IP —Å–µ—Ä–≤–µ—Ä–∞
# –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–º–µ–Ω–∞ - –æ–±–Ω–æ–≤–∏—Ç–µ –∑–¥–µ—Å—å
ALLOWED_HOSTS=yourdomain.com,www.yourdomain.com,your-server-ip

# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û False –¥–ª—è production
DEBUG=False

# =============================================================================
# –ë–ê–ó–ê –î–ê–ù–ù–´–• PostgreSQL (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
# =============================================================================

DB_HOST=db
DB_NAME=ghostwriter
DB_USER=ghostwriter
# –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
DB_PASSWORD=–≤–∞—à-–Ω–∞–¥–µ–∂–Ω—ã–π-–ø–∞—Ä–æ–ª—å-–¥–ª—è-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö
DB_PORT=5432

# =============================================================================
# REDIS (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
# =============================================================================

REDIS_URL=redis://redis:6379/0

# =============================================================================
# GIGACHAT API (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
# =============================================================================

# –í—Å—Ç–∞–≤—å—Ç–µ Authorization Key –∏–∑ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ Sber
GIGACHAT_CREDENTIALS=–≤–∞—à-authorization-key-–∏–∑-sber
GIGACHAT_SCOPE=GIGACHAT_API_PERS

# =============================================================================
# FLASK –ú–ò–ö–†–û–°–ï–†–í–ò–° (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ OpenAI)
# =============================================================================

# URL –≤–∞—à–µ–≥–æ Flask —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –∑–∞—Ä—É–±–µ–∂–Ω–æ–º —Ö–æ—Å—Ç–∏–Ω–≥–µ
# –ü–æ–∫–∞ Flask –Ω–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç - –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π URL
FLASK_EXTERNAL_URL=https://flask.yourdomain.com

# –ö–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –Ω–∞ Django –∏ Flask!)
# –í—Å—Ç–∞–≤—å—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Fernet Key
GENERATOR_ENCRYPTION_KEY=–≤–∞—à-fernet-key-–¥–ª—è-—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è

# =============================================================================
# TELEGRAM BOT (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
# =============================================================================

# –í—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –æ—Ç @BotFather
TELEGRAM_BOT_TOKEN=–≤–∞—à-—Ç–æ–∫–µ–Ω-–æ—Ç-botfather

# Username –±–æ—Ç–∞ (–±–µ–∑ @)
BOT_USERNAME=ghostcopywriter_bot

# Telegram –≤–ª–∞–¥–µ–ª—å—Ü–∞
OWNER_TELEGRAM=@your_username

# –°–µ–∫—Ä–µ—Ç –¥–ª—è webhook (–≤—Å—Ç–∞–≤—å—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
TELEGRAM_WEBHOOK_SECRET=–≤–∞—à-—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π-webhook-secret

# URL –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞ (–ë–ï–ó trailing slash)
# –ü–æ–∫–∞ –¥–æ–º–µ–Ω–∞ –Ω–µ—Ç - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ IP –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–æ–º–µ–Ω
# –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–º–µ–Ω–∞ - –æ–±–Ω–æ–≤–∏—Ç–µ –∑–¥–µ—Å—å
SITE_URL=https://yourdomain.com

# API –∫–ª—é—á –¥–ª—è —Å–≤—è–∑–∏ Django-Bot (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
# –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω, –±–æ—Ç –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ API –∫–ª—é—á–∞
DJANGO_API_KEY=

# –†–µ–∫–≤–∏–∑–∏—Ç—ã –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è (–¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–π –æ—Ñ–µ—Ä—Ç—ã)
EXECUTOR_FULL_NAME=–í–∞—à–µ –§–ò–û –ø–æ–ª–Ω–æ—Å—Ç—å—é
EXECUTOR_INN=123456789012
EXECUTOR_PHONE=+7 (999) 123-45-67
EXECUTOR_EMAIL=your-email@example.com
EXECUTOR_TELEGRAM=@username
EXECUTOR_CITY=–ú–æ—Å–∫–≤–∞, –†–æ—Å—Å–∏—è

# =============================================================================
# –ü–õ–ê–¢–Å–ñ–ù–´–ï –°–ò–°–¢–ï–ú–´ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–ª—è –ø—Ä–∏—ë–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π)
# =============================================================================

# –í—Å—Ç–∞–≤—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ –Æ–ö–∞—Å—Å–∞
YOOKASSA_SHOP_ID=–≤–∞—à-shop-id
YOOKASSA_SECRET_KEY=–≤–∞—à-secret-key

# =============================================================================
# HTTPS (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–ª—è production)
# =============================================================================

USE_HTTPS=true
```

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª:** `Ctrl+O`, `Enter`, `Ctrl+X`

**–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞:**
```bash
chmod 600 .env
```

### –®–∞–≥ 2: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

**–í–∞—Ä–∏–∞–Ω—Ç A: Let's Encrypt (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Certbot
sudo apt install certbot -y

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Nginx (–µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω)
sudo systemctl stop nginx

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
sudo certbot certonly --standalone \
  -d yourdomain.com \
  -d www.yourdomain.com \
  --email your-email@example.com \
  --agree-tos \
  --non-interactive

# –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ
mkdir -p ssl

# –ö–æ–ø–∏—Ä—É–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
sudo cp /etc/letsencrypt/live/yourdomain.com/fullchain.pem ssl/cert.pem
sudo cp /etc/letsencrypt/live/yourdomain.com/privkey.pem ssl/key.pem

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∞
sudo chown $USER:$USER ssl/*.pem
chmod 600 ssl/*.pem
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –°–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–¥–ª—è —Ç–µ—Å—Ç–æ–≤)**

```bash
mkdir -p ssl

openssl req -x509 -nodes -days 365 -newkey rsa:2048 \
  -keyout ssl/key.pem \
  -out ssl/cert.pem \
  -subj "/CN=yourdomain.com"
```

### –®–∞–≥ 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx

```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx
nano nginx.prod.conf

# –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
# server_name yourdomain.com www.yourdomain.com;

# –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω:
server_name yourdomain.com www.yourdomain.com;
```

### –®–∞–≥ 4: –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –±—ç–∫–∞–ø–æ–≤

```bash
mkdir -p backups
```

### –®–∞–≥ 5: –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

```bash
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose -f docker-compose.production.yml up -d --build

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose -f docker-compose.production.yml ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose -f docker-compose.production.yml logs -f
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
NAME                      STATUS
ghostwriter-django-prod   Up (healthy)
ghostwriter-bot-prod      Up
ghostwriter-db-prod       Up (healthy)
ghostwriter-redis-prod    Up (healthy)
ghostwriter-nginx-prod    Up (healthy)
```

### –®–∞–≥ 6: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –º–∏–≥—Ä–∞—Ü–∏–π (–≤–∫–ª—é—á–∞—è –Ω–æ–≤—É—é –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –º—É–ª—å—Ç–∏–∞–∫–∫–∞—É–Ω—Ç–æ–≤)
docker-compose -f docker-compose.production.yml exec django python manage.py migrate

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π
docker-compose -f docker-compose.production.yml exec django python manage.py showmigrations
```

**–í–∞–∂–Ω–æ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è `0017_add_telegram_user_id_to_tokens` –ø—Ä–∏–º–µ–Ω–µ–Ω–∞!

### –®–∞–≥ 7: –°–æ–∑–¥–∞–Ω–∏–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
docker-compose -f docker-compose.production.yml exec django python manage.py createsuperuser
```

### –®–∞–≥ 8: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
docker-compose -f docker-compose.production.yml exec django python manage.py create_dev_token --name="Admin"
```

–¢–æ–∫–µ–Ω –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ —Ñ–∞–π–ª `.dev_token`

---

## üåç –î–µ–ø–ª–æ–π Flask –Ω–∞ –∑–∞—Ä—É–±–µ–∂–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
curl -fsSL https://get.docker.com | sh
sudo usermod -aG docker $USER

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker Compose
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
```

### –®–∞–≥ 2: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
sudo mkdir -p /opt/ghostwriter-flask
cd /opt/ghostwriter-flask

# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–∏–ª–∏ —Ç–æ–ª—å–∫–æ flask_generator –ø–∞–ø–∫—É)
sudo git clone https://github.com/your-repo/ghostwriter.git .
cd flask_generator

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∞
sudo chown -R $USER:$USER /opt/ghostwriter-flask
```

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env –¥–ª—è Flask

```bash
cd /opt/ghostwriter-flask/flask_generator

# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª
nano .env
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ .env:**

```env
# OpenAI API Key
OPENAI_API_KEY=sk-your-openai-api-key-here

# –ö–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —Ç–æ—Ç –∂–µ, —á—Ç–æ –Ω–∞ Django —Å–µ—Ä–≤–µ—Ä–µ!)
GENERATOR_ENCRYPTION_KEY=—Ç–æ—Ç-–∂–µ-fernet-key-—á—Ç–æ-–Ω–∞-django

# –ú–æ–¥–µ–ª–∏ OpenAI
OPENAI_MODEL=gpt-4o-minio-mini  # –ú–æ–¥–µ–ª—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞ –∏ –ø—Ä–æ–º–ø—Ç–æ–≤
DALLE_MODEL=dall-e-3      # –ú–æ–¥–µ–ª—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

# Flask –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
FLASK_ENV=production
FLASK_DEBUG=False
```

**–í–ê–ñ–ù–û:** `GENERATOR_ENCRYPTION_KEY` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **–∏–¥–µ–Ω—Ç–∏—á–Ω—ã–º** –∫–ª—é—á—É –Ω–∞ Django —Å–µ—Ä–≤–µ—Ä–µ!

### –®–∞–≥ 4: SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–ª—è Flask

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Certbot
sudo apt install certbot -y

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
sudo certbot certonly --standalone \
  -d flask.yourdomain.com \
  --email your-email@example.com \
  --agree-tos \
  --non-interactive

# –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
mkdir -p ssl

# –ö–æ–ø–∏—Ä—É–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
sudo cp /etc/letsencrypt/live/flask.yourdomain.com/fullchain.pem ssl/cert.pem
sudo cp /etc/letsencrypt/live/flask.yourdomain.com/privkey.pem ssl/key.pem

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∞
sudo chown $USER:$USER ssl/*.pem
chmod 600 ssl/*.pem
```

### –®–∞–≥ 5: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx –¥–ª—è Flask

```bash
cd /opt/ghostwriter-flask/flask_generator

# –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
nano nginx.conf

# –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
# server_name flask.yourdomain.com;

# –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω
server_name flask.yourdomain.com;
```

### –®–∞–≥ 6: –ó–∞–ø—É—Å–∫ Flask

```bash
cd /opt/ghostwriter-flask

# –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose
docker-compose -f docker-compose.flask.yml up -d --build

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose -f docker-compose.flask.yml ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose -f docker-compose.flask.yml logs -f
```

### –®–∞–≥ 7: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ Flask

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ health endpoint
curl https://flask.yourdomain.com/health

# –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:
# {"status": "ok", "message": "Flask Generator API is running"}
```

---

## üåê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞ –∏ SSL

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS –∑–∞–ø–∏—Å–µ–π

**–î–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞ (Django):**

```
A     @              your-server-ip
A     www            your-server-ip
```

**–î–ª—è Flask –ø–æ–¥–¥–æ–º–µ–Ω–∞:**

```
A     flask          your-flask-server-ip
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ DNS:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞
dig yourdomain.com
dig www.yourdomain.com

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Flask –ø–æ–¥–¥–æ–º–µ–Ω–∞
dig flask.yourdomain.com
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ ALLOWED_HOSTS –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–º–µ–Ω–∞

```bash
cd /opt/ghostwriter

# –û—Ç–∫—Ä–æ–π—Ç–µ .env
nano .env

# –û–±–Ω–æ–≤–∏—Ç–µ ALLOWED_HOSTS
ALLOWED_HOSTS=yourdomain.com,www.yourdomain.com

# –û–±–Ω–æ–≤–∏—Ç–µ SITE_URL
SITE_URL=https://yourdomain.com

# –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose -f docker-compose.production.yml restart django
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

**–ï—Å–ª–∏ –¥–æ–º–µ–Ω –∏–∑–º–µ–Ω–∏–ª—Å—è:**

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Nginx
docker-compose -f docker-compose.production.yml stop nginx

# –ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
sudo certbot certonly --standalone \
  -d yourdomain.com \
  -d www.yourdomain.com

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
sudo cp /etc/letsencrypt/live/yourdomain.com/fullchain.pem ssl/cert.pem
sudo cp /etc/letsencrypt/live/yourdomain.com/privkey.pem ssl/key.pem

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∞
sudo chown $USER:$USER ssl/*.pem

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ Nginx
docker-compose -f docker-compose.production.yml start nginx
```

### 4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ SSL (Let's Encrypt)

```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ crontab
crontab -e

# –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü)
0 0 1 * * certbot renew --quiet && docker-compose -f docker-compose.production.yml restart nginx
```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–ª—è Django —Å–µ—Ä–≤–µ—Ä–∞

–°–º. —Ä–∞–∑–¥–µ–ª [–®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env —Ñ–∞–π–ª–∞](#—à–∞–≥-1-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-env-—Ñ–∞–π–ª–∞)

### –ì–¥–µ –±—Ä–∞—Ç—å –∫–ª—é—á–∏

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ì–¥–µ –ø–æ–ª—É—á–∏—Ç—å | –ö–æ–º–∞–Ω–¥–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ |
|------------|--------------|-------------------|
| `DJANGO_SECRET_KEY` | –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å | `python3 -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())'` |
| `GENERATOR_ENCRYPTION_KEY` | –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å | `python3 -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"` |
| `TELEGRAM_BOT_TOKEN` | @BotFather | `/newbot` –≤ Telegram |
| `TELEGRAM_WEBHOOK_SECRET` | –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å | `openssl rand -hex 32` |
| `GIGACHAT_CREDENTIALS` | developers.sber.ru | –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç ‚Üí GigaChat API |
| `OPENAI_API_KEY` | platform.openai.com | API Keys ‚Üí Create new secret key |
| `YOOKASSA_SHOP_ID` | yookassa.ru | –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç ‚Üí –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è |
| `YOOKASSA_SECRET_KEY` | yookassa.ru | –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç ‚Üí –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è |

### –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **GENERATOR_ENCRYPTION_KEY** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **–æ–¥–∏–Ω–∞–∫–æ–≤—ã–º** –Ω–∞ Django –∏ Flask —Å–µ—Ä–≤–µ—Ä–∞—Ö
2. **DJANGO_SECRET_KEY** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∏ —Å–µ–∫—Ä–µ—Ç–Ω—ã–º
3. **DB_PASSWORD** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞–¥–µ–∂–Ω—ã–º (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
4. **ALLOWED_HOSTS** –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–º–µ–Ω–∞
5. **SITE_URL** –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–º–µ–Ω–∞

---

## üì¶ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

### –ü–µ—Ä–≤—ã–π –¥–µ–ø–ª–æ–π

```bash
# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –º–∏–≥—Ä–∞—Ü–∏–π
docker-compose -f docker-compose.production.yml exec django python manage.py migrate

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –º–∏–≥—Ä–∞—Ü–∏–π
docker-compose -f docker-compose.production.yml exec django python manage.py showmigrations
```

### –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞

```bash
# –ü–æ–ª—É—á–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
cd /opt/ghostwriter
git pull

# –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose -f docker-compose.production.yml up -d --build

# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –Ω–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏
docker-compose -f docker-compose.production.yml exec django python manage.py migrate
```

### –í–∞–∂–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤–µ—Ä—Å–∏–∏ 2.2

- `0016_remove_legacy_token_fields` - —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –ø–æ–ª–µ–π
- `0017_add_telegram_user_id_to_tokens` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞—â–∏—Ç—ã –æ—Ç –º—É–ª—å—Ç–∏–∞–∫–∫–∞—É–Ω—Ç–æ–≤

---

## üí≥ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º

### –Æ–ö–∞—Å—Å–∞

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π:**
   - –ó–∞–π–¥–∏—Ç–µ –Ω–∞ [https://yookassa.ru/](https://yookassa.ru/)
   - –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç ‚Üí –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ‚Üí –ö–ª—é—á–∏ API
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `Shop ID` –∏ `Secret Key`

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook:**
   - –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí Webhook
   - URL: `https://yourdomain.com/api/payments/yookassa/webhook/`
   - –°–æ–±—ã—Ç–∏—è: `payment.succeeded`, `payment.canceled`

3. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ .env:**
   ```env
   YOOKASSA_SHOP_ID=–≤–∞—à-shop-id
   YOOKASSA_SECRET_KEY=–≤–∞—à-secret-key
   ```

4. **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫:**
   ```bash
   docker-compose -f docker-compose.production.yml restart django bot
   ```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –ø–ª–∞—Ç–µ–∂–µ–π
docker-compose -f docker-compose.production.yml logs -f django | grep -i payment

# –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook
curl -X POST https://yourdomain.com/api/payments/yookassa/webhook/ \
  -H "Content-Type: application/json" \
  -d '{"test": "data"}'
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –í—Å–µ –ª–æ–≥–∏
docker-compose -f docker-compose.production.yml logs -f

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose -f docker-compose.production.yml logs -f django
docker-compose -f docker-compose.production.yml logs -f bot
docker-compose -f docker-compose.production.yml logs -f nginx

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
docker-compose -f docker-compose.production.yml logs --tail=100 django
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose -f docker-compose.production.yml ps

# –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–¥–æ—Ä–æ–≤—å–µ
docker inspect ghostwriter-django-prod | grep -A 20 "Health"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
curl -I https://yourdomain.com
curl https://yourdomain.com/health
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats

# –†–∞–∑–º–µ—Ä volumes
docker system df -v
```

### –õ–æ–≥–∏ Django

```bash
# –í—Ö–æ–¥ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose -f docker-compose.production.yml exec django bash

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ Django
tail -f /app/logs/django.log

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
tail -f /app/logs/security.log
```

---

## üíæ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –±—ç–∫–∞–ø–∞
nano /opt/ghostwriter/backup.sh
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–∫—Ä–∏–ø—Ç–∞:**

```bash
#!/bin/bash

BACKUP_DIR="/opt/ghostwriter/backups"
DATE=$(date +%Y%m%d_%H%M%S)

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
mkdir -p $BACKUP_DIR

# –ë—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker-compose -f docker-compose.production.yml exec -T db \
  pg_dump -U ghostwriter ghostwriter > $BACKUP_DIR/db_$DATE.sql

# –ë—ç–∫–∞–ø –º–µ–¥–∏–∞ —Ñ–∞–π–ª–æ–≤
docker cp ghostwriter-django-prod:/app/media $BACKUP_DIR/media_$DATE

# –ë—ç–∫–∞–ø .env —Ñ–∞–π–ª–∞
cp /opt/ghostwriter/.env $BACKUP_DIR/env_$DATE

# –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –±—ç–∫–∞–ø–æ–≤ (—Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π)
find $BACKUP_DIR -type f -mtime +30 -delete

echo "Backup completed: $DATE"
```

**–°–¥–µ–ª–∞–π—Ç–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:**

```bash
chmod +x /opt/ghostwriter/backup.sh
```

**–î–æ–±–∞–≤—å—Ç–µ –≤ cron (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 2:00):**

```bash
crontab -e

# –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É:
0 2 * * * /opt/ghostwriter/backup.sh >> /opt/ghostwriter/logs/backup.log 2>&1
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞

```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker-compose -f docker-compose.production.yml exec -T db \
  psql -U ghostwriter ghostwriter < backups/db_YYYYMMDD_HHMMSS.sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞
docker cp backups/media_YYYYMMDD ghostwriter-django-prod:/app/media

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ .env
cp backups/env_YYYYMMDD /opt/ghostwriter/.env
```

---

## üîß Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker-compose -f docker-compose.production.yml logs django

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
docker-compose -f docker-compose.production.yml config

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
docker-compose -f docker-compose.production.yml exec django env | grep -E "DB_|DJANGO_|GIGACHAT_"
```

### –ü—Ä–æ–±–ª–µ–º–∞: 502 Bad Gateway

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Django –∑–∞–ø—É—â–µ–Ω
docker-compose -f docker-compose.production.yml ps django

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Nginx
docker-compose -f docker-compose.production.yml logs nginx

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Django
curl http://localhost:8000/health
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å PostgreSQL
docker-compose -f docker-compose.production.yml exec db pg_isready

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
docker-compose -f docker-compose.production.yml exec db \
  psql -U ghostwriter -d ghostwriter -c "SELECT 1;"

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ë–î
docker-compose -f docker-compose.production.yml restart db
```

### –ü—Ä–æ–±–ª–µ–º–∞: Telegram Bot –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞
docker-compose -f docker-compose.production.yml logs bot

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
docker-compose -f docker-compose.production.yml exec bot env | grep TELEGRAM

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
curl https://api.telegram.org/bot<TOKEN>/getWebhookInfo
```

### –ü—Ä–æ–±–ª–µ–º–∞: –°—Ç–∞—Ç–∏–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

```bash
# –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ —Å—Ç–∞—Ç–∏–∫—É
docker-compose -f docker-compose.production.yml exec django \
  python manage.py collectstatic --noinput

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞
docker-compose -f docker-compose.production.yml exec django \
  ls -la /app/staticfiles
```

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–π
docker-compose -f docker-compose.production.yml exec django \
  python manage.py showmigrations

# –û—Ç–∫–∞—Ç–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –º–∏–≥—Ä–∞—Ü–∏—é (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
docker-compose -f docker-compose.production.yml exec django \
  python manage.py migrate generator 0016

# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
docker-compose -f docker-compose.production.yml exec django \
  python manage.py migrate
```

---

## ‚úÖ Checklist –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

- [ ] Docker –∏ Docker Compose —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] –ü—Ä–æ–µ–∫—Ç —Å–∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- [ ] –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–ª—é—á–∏ –ø–æ–ª—É—á–µ–Ω—ã –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env

- [ ] `DJANGO_SECRET_KEY` —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] `GENERATOR_ENCRYPTION_KEY` —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω (–æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –¥–ª—è Django –∏ Flask)
- [ ] `TELEGRAM_BOT_TOKEN` –ø–æ–ª—É—á–µ–Ω –æ—Ç @BotFather
- [ ] `TELEGRAM_WEBHOOK_SECRET` —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω
- [ ] `GIGACHAT_CREDENTIALS` –ø–æ–ª—É—á–µ–Ω—ã
- [ ] `OPENAI_API_KEY` –ø–æ–ª—É—á–µ–Ω (–¥–ª—è Flask)
- [ ] `YOOKASSA_SHOP_ID` –∏ `YOOKASSA_SECRET_KEY` –ø–æ–ª—É—á–µ–Ω—ã
- [ ] `DB_PASSWORD` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–Ω–∞–¥–µ–∂–Ω—ã–π, 32+ —Å–∏–º–≤–æ–ª–æ–≤)
- [ ] `ALLOWED_HOSTS` –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] `SITE_URL` –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] `DEBUG=False` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

### –î–µ–ø–ª–æ–π Django

- [ ] `.env` —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] `nginx.prod.conf` –æ–±–Ω–æ–≤–ª–µ–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –¥–æ–º–µ–Ω–æ–º
- [ ] –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã (–≤–∫–ª—é—á–∞—è `0017`)
- [ ] –°—Ç–∞—Ç–∏–∫–∞ —Å–æ–±—Ä–∞–Ω–∞
- [ ] –°—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –î–µ–ø–ª–æ–π Flask

- [ ] `.env` —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω –≤ `flask_generator/`
- [ ] `GENERATOR_ENCRYPTION_KEY` —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å Django
- [ ] `OPENAI_API_KEY` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] Flask –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞

- [ ] DNS –∑–∞–ø–∏—Å–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] `ALLOWED_HOSTS` –æ–±–Ω–æ–≤–ª–µ–Ω —Å –¥–æ–º–µ–Ω–æ–º
- [ ] `SITE_URL` –æ–±–Ω–æ–≤–ª–µ–Ω —Å –¥–æ–º–µ–Ω–æ–º
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è –¥–æ–º–µ–Ω–∞
- [ ] Nginx –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω

### –ü–ª–∞—Ç–µ–∂–∏

- [ ] –Æ–ö–∞—Å—Å–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- [ ] Webhook URL –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ –Æ–ö–∞—Å—Å–∞
- [ ] –¢–µ—Å—Ç–æ–≤—ã–π –ø–ª–∞—Ç–µ–∂ –≤—ã–ø–æ–ª–Ω–µ–Ω

### –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

- [ ] –°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ HTTPS
- [ ] Telegram Bot –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ `/start`
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü–ª–∞—Ç–µ–∂–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
- [ ] –õ–æ–≥–∏ –ø–∏—à—É—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ë—ç–∫–∞–ø—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

---

## üéØ –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

```bash
# –ó–∞–ø—É—Å–∫
docker-compose -f docker-compose.production.yml up -d

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose -f docker-compose.production.yml down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker-compose -f docker-compose.production.yml restart

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose -f docker-compose.production.yml restart django

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose -f docker-compose.production.yml logs -f

# –°—Ç–∞—Ç—É—Å
docker-compose -f docker-compose.production.yml ps
```

### Django –∫–æ–º–∞–Ω–¥—ã

```bash
# –ú–∏–≥—Ä–∞—Ü–∏–∏
docker-compose -f docker-compose.production.yml exec django python manage.py migrate

# –°–æ–∑–¥–∞–Ω–∏–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
docker-compose -f docker-compose.production.yml exec django python manage.py createsuperuser

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
docker-compose -f docker-compose.production.yml exec django python manage.py create_dev_token --name="Admin"

# –û—á–∏—Å—Ç–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤
docker-compose -f docker-compose.production.yml exec django python manage.py cleanup_tokens

# –°–±–æ—Ä —Å—Ç–∞—Ç–∏–∫–∏
docker-compose -f docker-compose.production.yml exec django python manage.py collectstatic --noinput

# Django shell
docker-compose -f docker-compose.production.yml exec django python manage.py shell
```

### –ë—ç–∫–∞–ø—ã

```bash
# –†—É—á–Ω–æ–π –±—ç–∫–∞–ø –ë–î
docker-compose -f docker-compose.production.yml exec -T db \
  pg_dump -U ghostwriter ghostwriter > backups/manual_$(date +%Y%m%d_%H%M%S).sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î
docker-compose -f docker-compose.production.yml exec -T db \
  psql -U ghostwriter ghostwriter < backups/db_YYYYMMDD_HHMMSS.sql
```

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker-compose -f docker-compose.production.yml logs -f`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: `docker-compose -f docker-compose.production.yml ps`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–¥–µ–ª [Troubleshooting](#troubleshooting)
4. –°–æ–∑–¥–∞–π—Ç–µ Issue –Ω–∞ GitHub

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 2.2  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 25 —è–Ω–≤–∞—Ä—è 2026 –≥.  
**–°—Ç–∞—Ç—É—Å:** Production Ready ‚úÖ
