SYSTEM_PROMPT_PREAMBLE = '''
Цель: Сгенерировать высококачественный, цепляющий, SEO-оптимизированный контент для социальных сетей на заданную тему. Учитывай платформу, целевую аудиторию и параметры ниже.
'''

# Словари для сборки промпта (можно расширять)
VOICE_TONE_PROMPTS = {
    'Дружелюбный': 'Тон: дружелюбный.',
    'Профессиональный': 'Тон: профессиональный.',
    'Неформальный': 'Тон: неформальный.',
    'Юмористический': 'Тон: юмористический.',
    'Вдохновляющий': 'Тон: вдохновляющий.',
    'Серьезный': 'Тон: серьезный.',
    'Эмпатичный': 'Тон: эмпатичный.',
    'Смелый': 'Тон: смелый.',
    'Официальный': 'Тон: официальный.'
}
# ... (добавить остальные словари аналогично gigachat_api.py)

def assemble_prompt_from_criteria(data):
    """
    Собирает системный промпт из выбранных пользователем критериев.
    Только заполненные поля добавляются в prompt.
    """
    prompt_parts = [SYSTEM_PROMPT_PREAMBLE]
    # Тон голоса
    voice_tone = data.get('voice_tone', [])
    if isinstance(voice_tone, str):
        voice_tone = [voice_tone]
    for v in voice_tone:
        if v:
            prompt_parts.append(VOICE_TONE_PROMPTS.get(v, ''))
    # ... (аналогично для других параметров)
    # Тема
    topic = data.get('topic')
    if topic:
        prompt_parts.append(f'Тема: {topic}')
    return '\n'.join([p for p in prompt_parts if p]) 